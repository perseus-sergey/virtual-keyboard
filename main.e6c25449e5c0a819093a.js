!function(){"use strict";class t{constructor(t,e,i,o,n,s,r){let a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"",h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:"";this.keyCode=t,this.engTitleBottom=e,this.ukrTitleBottom=o,this.engShift=i,this.engCapsLock=s,this.ukrCapsLock=r,this.output=h,this.ukrShift=n,this.addBtnStyle=a}KEY_BUTTON_TAG="div";MAIN_BUTTON_STYLE="key-btn";KEY_COLOR_STYLES=["key-btn_color_blue","key-btn_color_green","key-btn_color_yellow","key-btn_color_pinc","key-btn_color_violet","key-btn_color_orange"];KEY_BG_COLOR_STYLES=["key-btn_bgcolor_yellow","key-btn_bgcolor_violet","key-btn_bgcolor_orange","key-btn_bgcolor_pinc","key-btn_bgcolor_green","key-btn_bgcolor_blue"];getKeySymbol(){let t,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return t=arguments.length>0&&void 0!==arguments[0]&&!arguments[0]?e?this.ukrShift:i?this.ukrCapsLock:this.ukrTitleBottom:e?this.engShift:i?this.engCapsLock:this.engTitleBottom,t}generateKeyButton(e,i,o){const n=this.addBtnStyle||["key-btn_color_green","key-btn_bgcolor_orange"],s=t.generateDomElement(this.KEY_BUTTON_TAG,"",this.MAIN_BUTTON_STYLE,n),r=this.getKeySymbol(e,i,o),a=t.generateDomElement("div",r);return s.append(a),s.dataset.code=this.keyCode,this.output&&(s.dataset.output=this.output),s}generateRandomColor(){const t=Math.floor(Math.random()*this.KEY_COLOR_STYLES.length),e=Math.floor(Math.random()*this.KEY_BG_COLOR_STYLES.length),i=this.KEY_COLOR_STYLES[t],o=this.KEY_BG_COLOR_STYLES[e];return this.getRawColor(i)===this.getRawColor(o)?this.generateRandomColor():[i,o]}getRawColor(t){return this.arrText=t.split("_"),this.arrText[this.arrText.length-1]}static generateDomElement(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const i=document.createElement(t),o=[];for(var n=arguments.length,s=new Array(n>2?n-2:0),r=2;r<n;r++)s[r-2]=arguments[r];return s.forEach((t=>{Array.isArray(t)?t.forEach((t=>o.push(t))):t.split(" ").forEach((t=>o.push(t)))})),o.length&&i.classList.add(...o),i.textContent=e,i}}class e{constructor(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0"!==localStorage.getItem("isEnglish"),o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.keys=t,this.rowNumbers=e,this.isEnglish=i,this.isShift=o,this.isCapsLock=n}isShift=!1;isCapsLock=!1;isEnglish=!0;rowNumbers=1;KEYBOARD_TAG="section";KEYBOARD_STYLE="keyboard";KEY_ROW_TAG="div";KEY_ROW_STYLE="keyboard__row";makeKeyboard(){const e=t.generateDomElement(this.KEYBOARD_TAG,"",this.KEYBOARD_STYLE);let i=0;return this.rowNumbers.forEach((o=>{const n=t.generateDomElement(this.KEY_ROW_TAG,"",this.KEY_ROW_STYLE);this.keys.slice(i,i+=o).forEach((t=>{n.append(t.generateKeyButton(this.isEnglish,this.isShift,this.isCapsLock))})),e.append(n)})),e}}const i=[new t("Backquote","`","~","'","~","`","'","key-btn_digit"),new t("Digit1","1","!","1","!","1","1","key-btn_digit"),new t("Digit2","2","@","2",'"',"2","2","key-btn_digit"),new t("Digit3","3","#","3","№","3","3","key-btn_digit"),new t("Digit4","4","$","4","%","4","4","key-btn_digit"),new t("Digit5","5","%","5",":","5","5","key-btn_digit"),new t("Digit6","6","^","6",",","6","6","key-btn_digit"),new t("Digit7","7","&","7",".","7","7","key-btn_digit"),new t("Digit8","8","*","8",";","8","8","key-btn_digit"),new t("Digit9","9","(","9","(","9","9","key-btn_digit"),new t("Digit0","0",")","0",")","0","0","key-btn_digit"),new t("Minus","-","_","-","_","-","-","key-btn_digit"),new t("Equal","=","+","=","+","=","=","key-btn_digit"),new t("Backspace","✘","✘","✘","✘","✘","✘","key-btn_special"),new t("Tab","➠","➠","➠","➠","➠","➠","key-btn_special","\t"),new t("KeyQ","q","Q","й","Й","Q","Й"),new t("KeyW","w","W","ц","Ц","W","Ц"),new t("KeyE","e","E","у","У","E","У"),new t("KeyR","r","R","к","К","R","К"),new t("KeyT","t","T","е","Е","T","Е"),new t("KeyY","y","Y","н","Н","Y","Н"),new t("KeyU","u","U","г","Г","U","Г"),new t("KeyI","i","I","ш","Ш","I","Ш"),new t("KeyO","o","O","щ","Щ","O","Щ"),new t("KeyP","p","P","з","З","P","З"),new t("BracketLeft","[","{","х","Х","[","Х"),new t("BracketRight","]","}","ї","Ї","]","Ї"),new t("Backslash","\\","|","ґ","Ґ","\\","Ґ"),new t("CapsLock","⏏","⏏","⏏","⏏","⏏","⏏","key-btn_special"),new t("KeyA","a","A","ф","Ф","A","Ф"),new t("KeyS","s","S","и","И","S","И"),new t("KeyD","d","D","в","В","D","В"),new t("KeyF","f","F","а","А","F","А"),new t("KeyG","g","G","п","П","G","П"),new t("KeyH","h","H","р","Р","H","Р"),new t("KeyJ","j","J","о","О","J","О"),new t("KeyK","k","K","л","Л","K","Л"),new t("KeyL","l","L","д","Д","L","Д"),new t("Semicolon",";",":","ж","Ж",";","Ж"),new t("Quote","'",'"',"є","Є","'","Є"),new t("Enter","✔","✔","✔","✔","✔","✔","key-btn_special key-btn_enter","\n"),new t("ShiftLeft","⇵","⇵","⇵","⇵","⇵","⇵","key-btn_special"),new t("KeyZ","z","Z","я","Я","Z","Я"),new t("KeyX","x","X","ч","Ч","X","Ч"),new t("KeyC","c","C","с","С","C","С"),new t("KeyV","v","V","м","М","V","М"),new t("KeyB","b","B","і","І","B","І"),new t("KeyN","n","N","т","Т","N","Т"),new t("KeyM","m","M","ь","Ь","M","Ь"),new t("Comma",",","<","б","Б",",","Б"),new t("Period",".",">","ю","Ю",".","Ю"),new t("Slash","/","?","/","?","/","/"),new t("ArrowUp","▲","▲","▲","▲","▲","▲","key-btn_special key-btn_arrow"),new t("ShiftRight","⇵","⇵","⇵","⇵","⇵","⇵","key-btn_special"),new t("Fn","fn","fn","fn","fn","fn","fn","key-btn_special"),new t("ControlLeft","ctrl","ctrl","ctrl","ctrl","ctrl","ctrl","key-btn_special"),new t("AltLeft","alt","alt","alt","alt","alt","alt","key-btn_special"),new t("MetaLeft","⌘","⌘","⌘","⌘","⌘","⌘","key-btn_special"),new t("Space","┉","┉","┉","┉","┉","┉","key-btn_space"," "),new t("MetaRight","⌘","⌘","⌘","⌘","⌘","⌘","key-btn_special"),new t("AltRight","alt","alt","alt","alt","alt","alt","key-btn_special"),new t("ArrowLeft","◀","◀","◀","◀","◀","◀","key-btn_special key-btn_arrow"),new t("ArrowDown","▼","▼","▼","▼","▼","▼","key-btn_special key-btn_arrow"),new t("ArrowRight","▶","▶","▶","▶","▶","▶","key-btn_special key-btn_arrow")],o=[14,14,13,13,10];class n{constructor(t){this.rowsNumber=t,this.makeEcran()}rowsNumberrowsNumber=5;monitor;ecran;displayWrapper;bottomWrapper;charReceiver;makeEcran(){return this.ecran=t.generateDomElement("section","","monitor"),this.ecran.append(this.makeMonitor()),this.ecran.append(this.makeBottomWrapper()),this.ecran}makeMonitor(){this.displayWrapper=t.generateDomElement("div","","monitor__display-wrapper");const e=t.generateDomElement("div","","monitor__display");return this.monitor=t.generateDomElement("textarea","","monitor__textarea"),this.monitor.rows=5,this.monitor.autofocus=!0,e.append(this.monitor),this.displayWrapper.append(e),this.displayWrapper}makeBottomWrapper(){this.bottomWrapper=t.generateDomElement("div","","monitor__receiver-wrapper");const e=t.generateDomElement("p","alt - switch language","monitor__os-marker");this.charReceiver=t.generateDomElement("div","","monitor__char-receiver");const i=t.generateDomElement("p","Made in MacOS","monitor__os-marker");return this.bottomWrapper.append(e),this.bottomWrapper.append(this.charReceiver),this.bottomWrapper.append(i),this.bottomWrapper}}const s={main:"",monitor:"",domKeyboard:"",charReceiver:"",moovingCharColor:"",isMeta:!1,start(){this.makeMainSection(),this.appendMonitor(),this.oKeyboard=new e(i,o),this.appendKeyboard(),this.addListners()},makeMainSection(){const e=t.generateDomElement("main","","main");document.body.append(e),this.main=e},appendMonitor(){const t=new n(5);this.main.append(t.ecran),this.monitor=t.monitor,this.charReceiver=t.charReceiver},appendKeyboard(){this.domKeyboard&&this.domKeyboard.remove(),this.domKeyboard=this.oKeyboard.makeKeyboard(),this.main.append(this.domKeyboard),this.shiftLighter()},shiftLighter(){document.querySelector('[data-code="CapsLock"]').classList.toggle("key-btn_shift-activated",this.oKeyboard.isCapsLock),document.querySelector('[data-code="ShiftLeft"]').classList.toggle("key-btn_shift-activated",this.oKeyboard.isShift),document.querySelector('[data-code="ShiftRight"]').classList.toggle("key-btn_shift-activated",this.oKeyboard.isShift)},addListners(){document.addEventListener("click",(t=>this.keyClickHandler(t))),this.monitor.addEventListener("blur",(()=>{this.monitor.focus()})),document.addEventListener("keydown",(t=>{this.isMeta||this.keyDownHandler(t)})),document.addEventListener("keyup",(t=>{"Shift"===t.key&&this.keyDownHandler(t),this.isMeta=!1}))},keyDownHandler(t){t.preventDefault();const e=document.querySelector(`[data-code="${t.code}"]`);try{e.classList.add("key-btn_pressed")}catch(t){return}this.keyClickHandler(t,e)},keyClickHandler(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.target.closest(".key-btn");if(e){switch(this.moovingCharColor=window.getComputedStyle(e).color,this.addKeyBtnPressedClass(e),e.dataset.code){case"Backspace":this.removeCharFromMonitorCursorPosition();break;case"CapsLock":this.capsActivated();break;case"ShiftLeft":case"ShiftRight":this.shiftActivated();break;case"AltLeft":case"AltRight":this.langSwitch();break;case"ArrowUp":this.monitor.selectionStart=0,this.monitor.selectionEnd=this.monitor.selectionStart;break;case"ArrowDown":this.monitor.selectionStart=this.monitor.value.length;break;case"ArrowLeft":this.monitor.selectionStart&&(this.monitor.selectionStart-=1,this.monitor.selectionEnd=this.monitor.selectionStart);break;case"ArrowRight":this.monitor.selectionStart+=1,this.monitor.selectionEnd=this.monitor.selectionStart;break;case"Fn":case"ControlLeft":case"MetaLeft":case"MetaRight":this.isMeta=!0;break;default:this.makeAnimatedChar(e),this.oKeyboard.isShift&&!t.getModifierState("Shift")&&this.shiftActivated()}this.removeKeyBtnPressedClass(e)}},shiftActivated(){this.oKeyboard.isShift=!this.oKeyboard.isShift,this.appendKeyboard()},capsActivated(){this.oKeyboard.isCapsLock=!this.oKeyboard.isCapsLock,this.appendKeyboard()},langSwitch(){this.oKeyboard.isEnglish=!this.oKeyboard.isEnglish,localStorage.setItem("isEnglish",this.oKeyboard.isEnglish?1:0),this.oKeyboard.isShift=!1,this.oKeyboard.isCapsLock=!1,this.appendKeyboard()},async makeAnimatedChar(e){const i=e.dataset.output||e.textContent,o=this.charReceiver.getBoundingClientRect(),n=(o.left+o.right)/2,s=t.generateDomElement("div",i,"mooving-char"),r=e.getBoundingClientRect(),a=(r.left+r.right)/2;s.style.top=`${r.top}px`,s.style.left=`${a}px`,s.style.color=this.moovingCharColor,document.body.append(s),await new Promise((t=>{setTimeout(t,30)})),s.classList.add("mooving-char_mooved"),s.style.transform=`translateY(${.9*o.bottom-r.top}px) translateX(${n-a}px)`,await new Promise((t=>{setTimeout(t,400)})),s.remove(),this.insertCharIntoMonitorCursorPosition(e)},insertCharIntoMonitorCursorPosition(t){const e=this.monitor.selectionStart,i=t.dataset.output||t.textContent,o=this.monitor.value.substring(0,e)+i,n=this.monitor.value.substring(e,this.monitor.value.length);this.monitor.value=o+n,this.monitor.selectionStart=e+1,this.monitor.selectionEnd=this.monitor.selectionStart},removeCharFromMonitorCursorPosition(){const t=this.monitor.selectionStart,e=this.monitor.value.substring(0,t-1),i=this.monitor.value.substring(t,this.monitor.value.length);this.monitor.value=e+i,this.monitor.selectionStart&&(this.monitor.selectionStart=t-1,this.monitor.selectionEnd=this.monitor.selectionStart)},addKeyBtnPressedClass(t){t.classList.add("key-btn_pressed"),t.classList.contains("key-btn_special")||t.classList.add("key-btn_transparent")},async removeKeyBtnPressedClass(t){await new Promise((t=>{setTimeout(t,500)})),t.classList.remove("key-btn_transparent"),t.classList.remove("key-btn_pressed")}};s.start()}();