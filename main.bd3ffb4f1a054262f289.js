!function(){"use strict";class t{constructor(t,e,i,n,o){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"";this.keyCode=t,this.engTitleBottom=e,this.ukrTitleBottom=n,this.engShift=i,this.output=a,this.ukrShift=o,this.addBtnStyle=s}MAIN_BUTTON_STYLE="key-btn";KEY_COLOR_STYLES=["key-btn_color_blue","key-btn_color_green","key-btn_color_yellow","key-btn_color_pinc","key-btn_color_violet","key-btn_color_orange"];KEY_BG_COLOR_STYLES=["key-btn_bgcolor_yellow","key-btn_bgcolor_violet","key-btn_bgcolor_orange","key-btn_bgcolor_pinc","key-btn_bgcolor_green","key-btn_bgcolor_blue"];generateKeyButton(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this.addBtnStyle?t.generateDomElement("div","",this.MAIN_BUTTON_STYLE,this.addBtnStyle):t.generateDomElement("div","",this.MAIN_BUTTON_STYLE,["key-btn_color_green","key-btn_bgcolor_orange"]);let o;o=e?i?this.engShift:this.engTitleBottom:i?this.ukrShift:this.ukrTitleBottom;const s=t.generateDomElement("div",o);return n.append(s),n.dataset.code=this.keyCode,this.output&&(n.dataset.output=this.output),n}generateRandomColor(){const t=Math.floor(Math.random()*this.KEY_COLOR_STYLES.length),e=Math.floor(Math.random()*this.KEY_BG_COLOR_STYLES.length),i=this.KEY_COLOR_STYLES[t],n=this.KEY_BG_COLOR_STYLES[e];return this.getRawColor(i)===this.getRawColor(n)?this.generateRandomColor():[i,n]}getRawColor(t){return this.arrText=t.split("_"),this.arrText[this.arrText.length-1]}static generateDomElement(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const i=document.createElement(t),n=[];for(var o=arguments.length,s=new Array(o>2?o-2:0),a=2;a<o;a++)s[a-2]=arguments[a];return s.forEach((t=>{Array.isArray(t)?t.forEach((t=>n.push(t))):t.split(" ").forEach((t=>n.push(t)))})),n.length&&i.classList.add(...n),i.textContent=e,i}}const e=[new t("Backquote","`","~","'","~","key-btn_digit"),new t("Digit1","1","!","1","!","key-btn_digit"),new t("Digit2","2","@","2",'"',"key-btn_digit"),new t("Digit3","3","#","3","№","key-btn_digit"),new t("Digit4","4","$","4","%","key-btn_digit"),new t("Digit5","5","%","5",":","key-btn_digit"),new t("Digit6","6","^","6",",","key-btn_digit"),new t("Digit7","7","&","7",".","key-btn_digit"),new t("Digit8","8","*","8",";","key-btn_digit"),new t("Digit9","9","(","9","(","key-btn_digit"),new t("Digit0","0",")","0",")","key-btn_digit"),new t("Minus","-","_","-","_","key-btn_digit"),new t("Equal","=","+","=","+","key-btn_digit"),new t("Backspace","✘","✘","✘","✘","key-btn_special"),new t("Tab","➠","➠","➠","➠","key-btn_special","\t"),new t("KeyQ","q","Q","й","Й"),new t("KeyW","w","W","ц","Ц"),new t("KeyE","e","E","у","У"),new t("KeyR","r","R","к","К"),new t("KeyT","t","T","е","Е"),new t("KeyY","y","Y","н","Н"),new t("KeyU","u","U","г","Г"),new t("KeyI","i","I","ш","Ш"),new t("KeyO","o","O","щ","Щ"),new t("KeyP","p","P","з","З"),new t("BracketLeft","[","{","х","Х"),new t("BracketRight","]","}","ї","Ї"),new t("Backslash","\\","|","ґ","Ґ"),new t("CapsLock","⏏","⏏","⏏","⏏","key-btn_special"),new t("KeyA","a","A","ф","Ф"),new t("KeyS","s","S","и","И"),new t("KeyD","d","D","в","В"),new t("KeyF","f","F","а","А"),new t("KeyG","g","G","п","П"),new t("KeyH","h","H","р","Р"),new t("KeyJ","j","J","о","О"),new t("KeyK","k","K","л","Л"),new t("KeyL","l","L","д","Д"),new t("Semicolon",";",":","ж","Ж"),new t("Quote","'",'"',"є","Є"),new t("Enter","✔","✔","✔","✔","key-btn_special key-btn_enter","\n"),new t("ShiftLeft","⇵","⇵","⇵","⇵","key-btn_special"),new t("KeyZ","z","Z","я","Я"),new t("KeyX","x","X","ч","Ч"),new t("KeyC","c","C","с","С"),new t("KeyV","v","V","м","М"),new t("KeyB","b","B","і","І"),new t("KeyN","n","N","т","Т"),new t("KeyM","m","M","ь","Ь"),new t("Comma",",","<","б","Б"),new t("Period",".",">","ю","Ю"),new t("Slash","/","?","/","?"),new t("ArrowUp","▲","▲","▲","▲","key-btn_special key-btn_arrow"),new t("ShiftRight","⇵","⇵","⇵","⇵","key-btn_special"),new t("Fn","fn","fn","fn","fn","key-btn_special"),new t("ControlLeft","ctrl","ctrl","ctrl","ctrl","key-btn_special"),new t("AltLeft","alt","alt","alt","alt","key-btn_special"),new t("MetaLeft","⌘","⌘","⌘","⌘","key-btn_special"),new t("Space","┉","┉","┉","┉","key-btn_space"," "),new t("MetaRight","⌘","⌘","⌘","⌘","key-btn_special"),new t("AltRight","alt","alt","alt","alt","key-btn_special"),new t("ArrowLeft","◀","◀","◀","◀","key-btn_special key-btn_arrow"),new t("ArrowDown","▼","▼","▼","▼","key-btn_special key-btn_arrow"),new t("ArrowRight","▶","▶","▶","▶","key-btn_special key-btn_arrow")],i=[14,14,13,13,10],n={main:"",monitor:"",keyboard:"",keybRow:"",charReceiver:"",moovingCharColor:"",isEnglish:"0"!==localStorage.getItem("isEnglish"),isShift:!1,isCapsLock:!1,isMeta:!1,start(){this.makeMainSection(),this.makeMonitor(),this.keyboard=this.makeKeyboard(),this.addListners()},makeMainSection(){const e=t.generateDomElement("main","","main");document.body.append(e),this.main=e},makeMonitor(){const e=t.generateDomElement("section","","monitor"),i=t.generateDomElement("div","","monitor__display-wrapper"),n=t.generateDomElement("div","","monitor__display"),o=t.generateDomElement("div","","monitor__receiver-wrapper"),s=t.generateDomElement("p","alt - switch language","monitor__os-marker");this.charReceiver=t.generateDomElement("div","","monitor__char-receiver");const a=t.generateDomElement("p","Made in MacOS","monitor__os-marker"),r=t.generateDomElement("textarea","","monitor__textarea");r.rows=5,r.autofocus=!0,e.append(i),e.append(o),o.append(s),o.append(this.charReceiver),o.append(a),i.append(n),n.append(r),this.main.append(e),this.monitor=r},makeKeyboard(){this.keyboard&&this.keyboard.remove();const n=e.slice(),o=t.generateDomElement("section","","keyboard");let s=0;for(let e=0;e<5;e+=1)this.keybRow=t.generateDomElement("div","","keyboard__row"),n.slice(s,s+=i[e]).forEach((t=>this.appendButtonIntoKeyboard(t))),o.append(this.keybRow);return this.main.append(o),o},addListners(){document.addEventListener("click",(t=>this.keyClickHandler(t))),this.monitor.addEventListener("blur",(()=>{this.monitor.focus()})),document.addEventListener("keydown",(t=>{this.isMeta||this.keyDownHandler(t)})),document.addEventListener("keyup",(()=>{this.isMeta=!1}))},keyDownHandler(t){t.preventDefault();const e=document.querySelector(`[data-code="${t.code}"]`);try{e.classList.add("key-btn_pressed")}catch(t){return}this.keyClickHandler(t,e)},keyClickHandler(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.target.closest(".key-btn");if(e){switch(this.moovingCharColor=window.getComputedStyle(e).color,this.addKeyBtnPressedClass(e),e.dataset.code){case"Backspace":this.removeCharFromMonitorCursorPosition();break;case"CapsLock":this.capsActivated(),document.querySelector('[data-code="CapsLock"]').classList.toggle("key-btn_shift-activated",this.isCapsLock);break;case"ShiftLeft":case"ShiftRight":this.shiftActivated(),document.querySelector('[data-code="ShiftLeft"]').classList.toggle("key-btn_shift-activated",this.isShift),document.querySelector('[data-code="ShiftRight"]').classList.toggle("key-btn_shift-activated",this.isShift);break;case"AltLeft":case"AltRight":this.langSwitch();break;case"ArrowUp":this.monitor.selectionStart=0,this.monitor.selectionEnd=this.monitor.selectionStart;break;case"ArrowDown":this.monitor.selectionStart=this.monitor.value.length;break;case"ArrowLeft":this.monitor.selectionStart&&(this.monitor.selectionStart-=1,this.monitor.selectionEnd=this.monitor.selectionStart);break;case"ArrowRight":this.monitor.selectionStart+=1,this.monitor.selectionEnd=this.monitor.selectionStart;break;case"Fn":case"ControlLeft":case"MetaLeft":case"MetaRight":this.isMeta=!0;break;default:this.makeAnimatedChar(e),this.isShift&&this.shiftActivated()}this.removeKeyBtnPressedClass(e)}},shiftActivated(){this.isCapsLock||(this.isShift=!this.isShift,this.keyboard=this.makeKeyboard())},capsActivated(){this.isCapsLock=!this.isCapsLock,this.isShift||(this.keyboard=this.makeKeyboard())},langSwitch(){this.isEnglish=!this.isEnglish,localStorage.setItem("isEnglish",this.isEnglish?1:0),this.isShift=!1,this.isCapsLock=!1,this.keyboard=this.makeKeyboard()},async makeAnimatedChar(e){const i=e.dataset.output||e.textContent,n=this.charReceiver.getBoundingClientRect(),o=(n.left+n.right)/2,s=t.generateDomElement("div",i,"mooving-char"),a=e.getBoundingClientRect(),r=(a.left+a.right)/2;s.style.top=`${a.top}px`,s.style.left=`${r}px`,s.style.color=this.moovingCharColor,document.body.append(s),await new Promise((t=>{setTimeout(t,30)})),s.classList.add("mooving-char_mooved"),s.style.transform=`translateY(${.9*n.bottom-a.top}px) translateX(${o-r}px)`,await new Promise((t=>{setTimeout(t,400)})),s.remove(),this.insertCharIntoMonitorCursorPosition(e)},insertCharIntoMonitorCursorPosition(t){const e=this.monitor.selectionStart,i=t.dataset.output||t.textContent,n=this.monitor.value.substring(0,e)+i,o=this.monitor.value.substring(e,this.monitor.value.length);this.monitor.value=n+o,this.monitor.selectionStart=e+1,this.monitor.selectionEnd=this.monitor.selectionStart},removeCharFromMonitorCursorPosition(){const t=this.monitor.selectionStart,e=this.monitor.value.substring(0,t-1),i=this.monitor.value.substring(t,this.monitor.value.length);this.monitor.value=e+i,this.monitor.selectionStart&&(this.monitor.selectionStart=t-1,this.monitor.selectionEnd=this.monitor.selectionStart)},addKeyBtnPressedClass(t){t.classList.add("key-btn_pressed"),t.classList.contains("key-btn_special")||t.classList.add("key-btn_transparent")},async removeKeyBtnPressedClass(t){await new Promise((t=>{setTimeout(t,500)})),t.classList.remove("key-btn_transparent"),t.classList.remove("key-btn_pressed")},appendButtonIntoKeyboard(t){const e="key-btn_digit"!==t.addBtnStyle&&this.isCapsLock||this.isShift;this.keybRow.append(t.generateKeyButton(this.isEnglish,e))}};n.start()}();